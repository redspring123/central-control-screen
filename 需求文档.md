# åä¸ºä¸­æ§å±é¡¹ç›® - éœ€æ±‚æ–‡æ¡£

**é¡¹ç›®åç§°ï¼š** ä¸­å¤®æ§åˆ¶å±ï¼ˆCentral Control Screenï¼‰  
**ç›®æ ‡å¹³å°ï¼š** åä¸ºé¸¿è’™OS (OpenHarmony)  
**æ–‡æ¡£æ—¥æœŸï¼š** 2025å¹´12æœˆ30æ—¥  
**ç‰ˆæœ¬ï¼š** 1.0

---

## ç›®å½•

1. [é¡¹ç›®æ¦‚è¿°](#é¡¹ç›®æ¦‚è¿°)
2. [åŠŸèƒ½éœ€æ±‚](#åŠŸèƒ½éœ€æ±‚)
3. [ç³»ç»Ÿæ¶æ„](#ç³»ç»Ÿæ¶æ„)
4. [UMLç”¨ä¾‹å›¾](#umlç”¨ä¾‹å›¾)
5. [æ¨¡å—è®¾è®¡](#æ¨¡å—è®¾è®¡)
6. [å…³é”®æµç¨‹è®¾è®¡](#å…³é”®æµç¨‹è®¾è®¡)
7. [æ•°æ®æ¨¡å‹è®¾è®¡](#æ•°æ®æ¨¡å‹è®¾è®¡)
8. [æ¥å£è§„èŒƒ](#æ¥å£è§„èŒƒ)

---

## é¡¹ç›®æ¦‚è¿°

### 1.1 é¡¹ç›®èƒŒæ™¯

åä¸ºä¸­æ§å±é¡¹ç›®æ˜¯ä¸€ä¸ªä¸ºå…»è€ã€åŒ»ç–—é¢†åŸŸè®¾è®¡çš„æ™ºèƒ½ä¸­å¤®æ§åˆ¶å¹³å°ã€‚é€šè¿‡é›†æˆå¥åº·ç›‘æµ‹ã€æ™ºæ…§åŒ»ç–—ã€åœºæ™¯æ§åˆ¶ç­‰åŠŸèƒ½ï¼Œä¸ºç”¨æˆ·æä¾›ä¸€ç«™å¼çš„å¥åº·ç®¡ç†å’ŒåŒ»ç–—æœåŠ¡ä½“éªŒã€‚

### 1.2 é¡¹ç›®ç›®æ ‡

- æä¾›ç”¨æˆ·å¥åº·ä½“å¾ç›‘æµ‹å’Œè¿åŠ¨ç®¡ç†
- æä¾›åœ¨çº¿é—®è¯Šå’Œä¸€é”®å‘¼å«åŒ»ç–—æœåŠ¡
- é›†æˆæ™ºèƒ½å®¶å±…æ§åˆ¶åŠŸèƒ½ï¼ˆèƒ½é‡ç®¡ç†ã€ç½‘ç»œçŠ¶æ€ã€å¤©æ°”é¢„æŠ¥ç­‰ï¼‰
- å»ºç«‹æ¨¡å—åŒ–çš„ç»„ä»¶ä½“ç³»ï¼Œä¾¿äºå¿«é€Ÿè¿­ä»£å’ŒåŠŸèƒ½æ‰©å±•

### 1.3 æ ¸å¿ƒç”¨æˆ·

- è€å¹´ç”¨æˆ·åŠå…¶å®¶äºº
- æ…¢æ€§ç—…æ‚£è€…
- å¥åº·ç®¡ç†çˆ±å¥½è€…
- å…»è€æœºæ„ç®¡ç†è€…

### 1.4 ä¸»è¦ç‰¹ç‚¹

- **é«˜å†…èšä½è€¦åˆï¼š** é‡‡ç”¨ç‰¹æ€§æ¨¡å—åŒ–æ¶æ„
- **è·¨æ¨¡å—åä½œï¼š** é€šè¿‡å‘½åè·¯ç”±å®ç°é¡µé¢å¯¼èˆª
- **å®æ—¶æ•°æ®åŒæ­¥ï¼š** æ”¯æŒå®šæ—¶æ•°æ®åˆ·æ–°å’Œå®æ—¶ä¼ æ„Ÿå™¨æ•°æ®
- **æ·±æµ…ä¸»é¢˜æ”¯æŒï¼š** é€‚é…é¸¿è’™ç³»ç»Ÿæ·±æµ…æ¨¡å¼

---

## åŠŸèƒ½éœ€æ±‚

### 2.1 ä¸»é¡µåŠŸèƒ½æ¨¡å—ï¼ˆMainPageï¼‰

| åŠŸèƒ½ | æè¿° | ä¼˜å…ˆçº§ |
|-----|------|--------|
| å®æ—¶èƒ½æºç›‘æ§ | æ˜¾ç¤ºä»Šæ—¥ç”µåŠ›ä½¿ç”¨æƒ…å†µå’Œç¢³æ’æ”¾æ•°æ® | P1 |
| ç½‘ç»œçŠ¶æ€æ˜¾ç¤º | å®æ—¶æ˜¾ç¤ºä¸Šä¼ /ä¸‹è½½é€Ÿåº¦å’Œç½‘ç»œè´¨é‡ | P2 |
| å¤©æ°”é¢„æŠ¥ | æ˜¾ç¤ºå½“å‰æ¸©åº¦ã€å¤©æ°”çŠ¶å†µå’Œå¤©æ°”å»ºè®® | P2 |
| åœºæ™¯åˆ‡æ¢ | æ”¯æŒå®¶å±…ã€å‡ºè¡Œã€ç¡çœ ç­‰å¤šç§åœºæ™¯æ¨¡å¼ | P2 |
| é€šçŸ¥æ¶ˆæ¯ä¸­å¿ƒ | æ±‡æ€»å¥åº·é¢„è­¦ã€åŒ»ç–—æé†’ç­‰ä¿¡æ¯ | P3 |

### 2.2 å¥åº·ç›‘æµ‹æ¨¡å—ï¼ˆHealthï¼‰

#### 2.2.1 å±…å®¶åº·å…»ï¼ˆWellnessï¼‰

| åŠŸèƒ½ | æè¿° | æ•°æ®æ¥æº |
|-----|------|---------|
| å®æ—¶ä½“å¾ç›‘æµ‹ | å¿ƒç‡ã€è¡€å‹ã€è¡€æ°§ã€ä½“æ¸©å®æ—¶æ˜¾ç¤º | ç©¿æˆ´è®¾å¤‡/ä¼ æ„Ÿå™¨ |
| å¥åº·æ¡£æ¡ˆ | ç”¨æˆ·åŸºæœ¬ä¿¡æ¯ã€ç—…å²ã€ç”¨è¯è®°å½• | æœ¬åœ°æ•°æ®åº“ |
| ä½“å¾æ•°æ®æŸ¥è¯¢ | æŒ‰æ—¶é—´èŒƒå›´æŸ¥çœ‹å†å²ä½“å¾æ•°æ® | æœ¬åœ°æ•°æ®åº“ |
| å¥åº·é¢„è­¦ | å¼‚å¸¸æ•°æ®æé†’ï¼ˆå¦‚é«˜è¡€å‹ã€ä½è¡€æ°§ï¼‰ | å®æ—¶ç›‘æµ‹ |
| å®£æ•™èµ„è®¯ | å¥åº·ç§‘æ™®æ–‡ç« å’Œè§†é¢‘æ¨è | å†…å®¹æœåŠ¡å™¨ |
| æŠ¤å£«æœåŠ¡ | è”ç³»æŠ¤å£«å’¨è¯¢å’Œä¸Šé—¨æœåŠ¡ | æœåŠ¡ç³»ç»Ÿ |
| åœ¨çº¿é—®è¯Š | é¢„çº¦å’Œè¿›è¡ŒåŒ»ç”Ÿè§†é¢‘é—®è¯Š | åŒ»ç–—ç³»ç»Ÿ |

#### 2.2.2 è¿åŠ¨å¥åº·ï¼ˆSports Healthï¼‰

| åŠŸèƒ½ | æè¿° | æ•°æ®æ¥æº |
|-----|------|---------|
| æ­¥æ•°è¿½è¸ª | è®°å½•æ¯æ—¥æ­¥æ•°å’Œè¿åŠ¨è·ç¦» | ç©¿æˆ´è®¾å¤‡ |
| å¡è·¯é‡Œè®¡ç®— | æ ¹æ®æ­¥æ•°è‡ªåŠ¨è®¡ç®—æ¶ˆè€—çƒ­é‡ | ç®—æ³•è®¡ç®— |
| è¿åŠ¨ç›®æ ‡ç®¡ç† | è®¾ç½®å’Œè¿½è¸ªæ¯æ—¥è¿åŠ¨ç›®æ ‡ | æœ¬åœ°é…ç½® |
| è¿åŠ¨å†å² | æŸ¥çœ‹å‘¨/æœˆè¿åŠ¨æ•°æ®ç»Ÿè®¡ | æœ¬åœ°æ•°æ®åº“ |
| è¿åŠ¨å»ºè®® | æ ¹æ®æ•°æ®æ¨èè¿åŠ¨è®¡åˆ’ | AIæ¨è |

### 2.3 æ™ºæ…§åŒ»ç–—æ¨¡å—ï¼ˆMedicalï¼‰

#### 2.3.1 ä¸€é”®å‘¼å«ï¼ˆCall Serviceï¼‰

| åŠŸèƒ½ | æè¿° | æµç¨‹ |
|-----|------|------|
| å¿«é€Ÿå‘¼å« | ä¸€é”®è¿æ¥åŒ»ç”Ÿ/æŠ¤å£«è¿›è¡Œè§†é¢‘é€šè¯ | ç”¨æˆ·ç‚¹å‡» â†’ åŒ¹é…åŒ»æŠ¤äººå‘˜ â†’ å»ºç«‹è¿æ¥ |
| é€šè¯è®¡æ—¶ | æ˜¾ç¤ºé€šè¯æ—¶é•¿ | å®æ—¶è®¡æ—¶ |
| æŒ‚æ–­æ§åˆ¶ | æ”¯æŒç”¨æˆ·/åŒ»æŠ¤äººå‘˜ä¸»åŠ¨æŒ‚æ–­ | ç‚¹å‡»æŒ‚æ–­æŒ‰é’® â†’ ç»“æŸé€šè¯ |
| é€šè¯è®°å½• | ä¿å­˜é€šè¯å†å²ä¿¡æ¯ | æœ¬åœ°æ•°æ®åº“ |

#### 2.3.2 åœ¨çº¿é—®è¯Šï¼ˆOnline Consultationï¼‰

| åŠŸèƒ½ | æè¿° | æµç¨‹ |
|-----|------|------|
| åŒ»ç”Ÿåˆ—è¡¨ | æ˜¾ç¤ºå¯å’¨è¯¢çš„åŒ»ç”Ÿä¿¡æ¯å’Œè¯„åˆ† | ä»æœåŠ¡å™¨è·å– |
| é—®è¯Šé¢„çº¦ | é€‰æ‹©åŒ»ç”Ÿå’Œæ—¶é—´è¿›è¡Œé¢„çº¦ | ç”¨æˆ·é¢„çº¦ â†’ ç¡®è®¤ â†’ è¿›å…¥æ’é˜Ÿ |
| å®æ—¶æ²Ÿé€š | æ”¯æŒæ–‡æœ¬ã€è¯­éŸ³ã€å›¾ç‰‡æ²Ÿé€š | WebSocketå®æ—¶é€šä¿¡ |
| å¤„æ–¹å¼€å…· | åŒ»ç”Ÿå¯ä»¥å¼€å…·ç”µå­å¤„æ–¹ | åŒ»ç”Ÿå¼€å…· â†’ ç”¨æˆ·ç¡®è®¤ |
| é—®è¯Šè®°å½• | ä¿å­˜é—®è¯Šå†…å®¹å’ŒåŒ»å˜± | æœ¬åœ°+æœåŠ¡å™¨å­˜å‚¨ |

---

## ç³»ç»Ÿæ¶æ„

### 3.1 æ•´ä½“æ¶æ„å›¾

```mermaid
graph TB
    Entry["åº”ç”¨å…¥å£å±‚<br/>EntryAbility.ts<br/>(åº”ç”¨ç”Ÿå‘½å‘¨æœŸç®¡ç†)"]
    
    Products["äº§å“é›†æˆå±‚<br/>Products"]
    MainPageEntry["Entry Module<br/>MainPage.ets<br/>- èšåˆæ•°æ®<br/>- è°ƒç”¨å„æ¨¡å—"]
    
    Products --> MainPageEntry
    Entry --> Products
    
    Commons1["Commons<br/>UIComponents<br/>- è‡ªå®šä¹‰ç»„ä»¶<br/>- ä¸»é¢˜ç³»ç»Ÿ<br/>- åŠ¨ç”»åº“"]
    Features["Features"]
    Commons2["Commons<br/>Utils<br/>- HttpUtil<br/>- DateUtil<br/>- LogUtil"]
    
    MainPageEntry --> Commons1
    MainPageEntry --> Features
    MainPageEntry --> Commons2
    
    Health["Health Module<br/>- Wellness<br/>- SportsPage"]
    Medical["Medical Module<br/>- CallPage<br/>- Consultation"]
    MainPageModule["MainPage Module<br/>ä¸»é¡µæ¨¡å—"]
    
    Features --> Health
    Features --> Medical
    Features --> MainPageModule
    
    style Entry fill:#e1f5ff
    style Products fill:#f3e5f5
    style Features fill:#fff3e0
    style Commons1 fill:#e8f5e9
    style Commons2 fill:#e8f5e9
```

### 3.2 åˆ†å±‚è¯´æ˜

| å±‚çº§ | èŒè´£ | ç¤ºä¾‹ |
|-----|------|------|
| **åº”ç”¨å…¥å£å±‚** | åº”ç”¨ç”Ÿå‘½å‘¨æœŸã€æƒé™ç®¡ç†ã€å…¨å±€åˆå§‹åŒ– | EntryAbility.ts |
| **äº§å“é›†æˆå±‚** | ç»„è£…å„ä¸ªç‰¹æ€§æ¨¡å—ã€æ±‡æ€»é¦–é¡µæ•°æ® | Entryæ¨¡å—ã€MainPage.ets |
| **ç‰¹æ€§æ¨¡å—å±‚** | ç‹¬ç«‹çš„ä¸šåŠ¡æ¨¡å—ï¼Œé«˜å†…èšä½è€¦åˆ | Healthã€Medicalã€MainPage |
| **å…¬å…±èƒ½åŠ›å±‚** | åŸºç¡€ç»„ä»¶ã€å·¥å…·ã€ä¸»é¢˜ç­‰é€šç”¨èƒ½åŠ› | UIComponentsã€Utils |

---

## UMLç”¨ä¾‹å›¾

### 4.1 ç³»ç»Ÿç”¨ä¾‹å›¾

```mermaid
graph TB
    System["ä¸­å¤®æ§åˆ¶å±ç³»ç»Ÿ"]
    
    User["ğŸ‘¤ ç”¨æˆ·"]
    Doctor["ğŸ‘¨â€âš•ï¸ åŒ»æŠ¤äººå‘˜"]
    Admin["âš™ï¸ ç³»ç»Ÿç®¡ç†å‘˜"]
    
    User -.->|äº¤äº’| System
    Doctor -.->|äº¤äº’| System
    Admin -.->|äº¤äº’| System
    
    ViewHome["æŸ¥çœ‹é¦–é¡µ"]
    ViewHealth["æŸ¥çœ‹ä½“å¾"]
    ReceiveCall["æ¥æ”¶å‘¼å«"]
    TrackSports["è¿åŠ¨è·Ÿè¸ª"]
    ViewHistory["æŸ¥çœ‹å†å²"]
    DoConsult["è¿›è¡Œé—®è¯Š"]
    BrowseEdu["æµè§ˆå®£æ•™"]
    AlertHealth["å¥åº·é¢„è­¦"]
    OpenPrescription["å¼€å…·å¤„æ–¹"]
    CallUser["ä¸€é”®å‘¼å«"]
    PreBooking["é¢„çº¦é—®è¯Š"]
    NurseService["æŠ¤å£«æœåŠ¡"]
    HealthWarning["ä½“å¾å¼‚å¸¸æé†’"]
    ViewRecord["æŸ¥çœ‹è®°å½•"]
    GenerateReport["ç”ŸæˆæŠ¥è¡¨"]
    DataManagement["æ•°æ®ç®¡ç†"]
    
    System --> ViewHome
    System --> ViewHealth
    System --> ReceiveCall
    System --> TrackSports
    System --> ViewHistory
    System --> DoConsult
    System --> BrowseEdu
    System --> AlertHealth
    System --> OpenPrescription
    System --> CallUser
    System --> PreBooking
    System --> NurseService
    System --> HealthWarning
    System --> ViewRecord
    System --> GenerateReport
    System --> DataManagement
    
    User -.->|ä½¿ç”¨| ViewHome
    User -.->|æŸ¥çœ‹| ViewHealth
    User -.->|ä½¿ç”¨| TrackSports
    User -.->|æŸ¥è¯¢| ViewHistory
    User -.->|æµè§ˆ| BrowseEdu
    User -.->|æ”¶åˆ°| HealthWarning
    User -.->|å‘èµ·| CallUser
    User -.->|è¿›è¡Œ| PreBooking
    
    Doctor -.->|å“åº”| ReceiveCall
    Doctor -.->|è¿›è¡Œ| DoConsult
    Doctor -.->|æ‰§è¡Œ| OpenPrescription
    
    Admin -.->|ç®¡ç†| DataManagement
    Admin -.->|æŸ¥çœ‹| GenerateReport
```

### 4.2 ç”¨æˆ·äº¤äº’æµç¨‹

```mermaid
graph TD
    A["ç”¨æˆ·ç™»å½•"]
    B["è¿›å…¥é¦–é¡µ MainPage<br/>- æ˜¾ç¤ºèƒ½æº/ç½‘ç»œ/å¤©æ°”<br/>- èšåˆå„æ¨¡å—å¿«æ·å…¥å£"]
    
    C["å¥åº·ç›‘æµ‹"]
    D["åŒ»ç–—æœåŠ¡"]
    E["åœºæ™¯æ§åˆ¶"]
    F["æ›´å¤šåŠŸèƒ½"]
    
    C1["åº·å…»é¡µé¢"]
    C2["ä½“å¾æŸ¥çœ‹"]
    C3["è¿åŠ¨é¡µé¢"]
    C4["æ­¥æ•°/å¡è·¯é‡Œ"]
    
    D1["å‘¼å«"]
    D2["åŒ»ç”Ÿæ¥å¬"]
    D3["é—®è¯Šé¢„çº¦"]
    D4["åŒ»ç”Ÿé—®è¯Š"]
    
    E1["æ™ºèƒ½å®¶å±…"]
    E2["èƒ½æºç®¡ç†"]
    E3["ç½‘ç»œçŠ¶æ€"]
    E4["å¤©æ°”æŸ¥è¯¢"]
    
    F1["è®¾ç½®"]
    F2["ä¸»é¢˜åˆ‡æ¢"]
    F3["æ•°æ®å¤‡ä»½"]
    F4["é€€å‡º"]
    
    A --> B
    B --> C
    B --> D
    B --> E
    B --> F
    
    C --> C1
    C1 --> C2
    C --> C3
    C3 --> C4
    
    D --> D1
    D1 --> D2
    D --> D3
    D3 --> D4
    
    E --> E1
    E1 --> E2
    E1 --> E3
    E1 --> E4
    
    F --> F1
    F1 --> F2
    F1 --> F3
    F1 --> F4
    
    style A fill:#e3f2fd
    style B fill:#f3e5f5
    style C fill:#fff3e0
    style D fill:#fff3e0
    style E fill:#fff3e0
    style F fill:#fff3e0
```

---

## æ¨¡å—è®¾è®¡

### 5.1 æ¨¡å—ä¾èµ–å…³ç³»

```mermaid
graph TB
    Entry["Entry Module<br/>åº”ç”¨å…¥å£"]
    MainPage["MainPage Module"]
    CommonsUtils["CommonsUtils"]
    Health["Health Module"]
    Medical["Medical Module"]
    UIComp["UIComponents"]
    
    Entry --> MainPage
    MainPage --> Health
    MainPage --> Medical
    MainPage --> UIComp
    Health --> CommonsUtils
    Medical --> CommonsUtils
    UIComp --> CommonsUtils
    
    style Entry fill:#bbdefb
    style MainPage fill:#c8e6c9
    style CommonsUtils fill:#fff9c4
    style Health fill:#ffccbc
    style Medical fill:#ffccbc
    style UIComp fill:#d1c4e9
```

### 5.2 å¥åº·ç›‘æµ‹æ¨¡å—ç»“æ„

```mermaid
graph LR
    A["Health Module<br/>å¥åº·ç›‘æµ‹æ¨¡å—"]
    
    B["model/<br/>æ•°æ®æ¨¡å‹å±‚"]
    C["viewmodel/<br/>ä¸šåŠ¡é€»è¾‘å±‚"]
    D["page/<br/>è¡¨ç°å±‚"]
    E["database/<br/>æ•°æ®åº“å±‚"]
    F["resources/<br/>èµ„æºå±‚"]
    
    A --> B
    A --> C
    A --> D
    A --> E
    A --> F
    
    B1["SportsDataModel.ets"]
    B2["MockDataService.ets"]
    B3["NavigationModel.ets"]
    B4["btn.ets"]
    
    C1["HealthSportsViewModel.ts"]
    
    D1["WellnessPage.ets"]
    D2["HealthSportsPage.ets"]
    
    B --> B1
    B --> B2
    B --> B3
    B --> B4
    
    C --> C1
    
    D --> D1
    D --> D2
    
    style A fill:#fff3e0
    style B fill:#e8f5e9
    style C fill:#c8e6c9
    style D fill:#a5d6a7
    style E fill:#81c784
    style F fill:#66bb6a
```

### 5.3 åŒ»ç–—æœåŠ¡æ¨¡å—ç»“æ„

```mermaid
graph LR
    A["Medical Module<br/>åŒ»ç–—æœåŠ¡æ¨¡å—"]
    
    B["model/<br/>æ•°æ®æ¨¡å‹å±‚"]
    C["viewmodel/<br/>ä¸šåŠ¡é€»è¾‘å±‚"]
    D["pages/<br/>è¡¨ç°å±‚"]
    E["service/<br/>æœåŠ¡å±‚"]
    F["resources/<br/>èµ„æºå±‚"]
    
    A --> B
    A --> C
    A --> D
    A --> E
    A --> F
    
    B1["DoctorModel.ts"]
    B2["CallModel.ts"]
    B3["ConsultationModel.ts"]
    
    C1["DoctorViewModel.ts"]
    C2["CallViewModel.ts"]
    C3["ConsultationViewModel.ts"]
    
    D1["CallPage.ets"]
    D2["OnlineConsult.ets"]
    
    E1["CallService.ts"]
    E2["ConsultationService.ts"]
    
    B --> B1
    B --> B2
    B --> B3
    
    C --> C1
    C --> C2
    C --> C3
    
    D --> D1
    D --> D2
    
    E --> E1
    E --> E2
    
    style A fill:#ffebee
    style B fill:#ffcccc
    style C fill:#ff9999
    style D fill:#ff6666
    style E fill:#ff3333
    style F fill:#ff0000
```

### 5.4 ä¸»é¡µæ¨¡å—ç»“æ„

```mermaid
graph LR
    A["MainPage Module<br/>ä¸»é¡µæ¨¡å—"]
    
    B["model/<br/>æ•°æ®æ¨¡å‹å±‚"]
    C["viewmodel/<br/>ä¸šåŠ¡é€»è¾‘å±‚"]
    D["pages/<br/>è¡¨ç°å±‚"]
    E["components/<br/>ç»„ä»¶åº“"]
    F["resources/<br/>èµ„æºå±‚"]
    
    A --> B
    A --> C
    A --> D
    A --> E
    A --> F
    
    B1["HomeDataService.ts"]
    B2["EnergyData.ts"]
    B3["NetworkData.ts"]
    B4["WeatherData.ts"]
    
    C1["HomeViewModel.ts"]
    
    D1["MainPage.ets"]
    
    E1["EnergyCard.ets"]
    E2["NetworkCard.ets"]
    E3["WeatherCard.ets"]
    E4["SceneControl.ets"]
    
    B --> B1
    B --> B2
    B --> B3
    B --> B4
    
    C --> C1
    D --> D1
    
    E --> E1
    E --> E2
    E --> E3
    E --> E4
    
    style A fill:#e3f2fd
    style B fill:#bbdefb
    style C fill:#90caf9
    style D fill:#64b5f6
    style E fill:#42a5f5
    style F fill:#2196f3
```

### 5.5 å…¬å…±èƒ½åŠ›æ¨¡å—

#### 5.5.1 UIComponentsï¼ˆUIç»„ä»¶åº“ï¼‰

```mermaid
graph LR
    A["UIComponents Module<br/>UIç»„ä»¶åº“"]
    
    B["components/<br/>è‡ªå®šä¹‰ç»„ä»¶"]
    C["theme/<br/>ä¸»é¢˜ç³»ç»Ÿ"]
    D["resources/<br/>èµ„æº"]
    
    A --> B
    A --> C
    A --> D
    
    B1["CustomScrollBar.ets"]
    B2["CustomButton.ets"]
    B3["RoundedCard.ets"]
    B4["DataChart.ets"]
    B5["CustomDialog.ets"]
    
    C1["ThemeProvider.ets"]
    C2["LightTheme.ets"]
    C3["DarkTheme.ets"]
    
    B --> B1
    B --> B2
    B --> B3
    B --> B4
    B --> B5
    
    C --> C1
    C --> C2
    C --> C3
    
    style A fill:#f3e5f5
    style B fill:#e1bee7
    style C fill:#ce93d8
    style D fill:#ba68c8
```

#### 5.5.2 Utilsï¼ˆå·¥å…·åº“ï¼‰

```mermaid
graph LR
    A["Utils Module<br/>å·¥å…·åº“"]
    
    B["http/<br/>HTTPé€šä¿¡"]
    C["date/<br/>æ—¥æœŸå¤„ç†"]
    D["log/<br/>æ—¥å¿—"]
    E["storage/<br/>æœ¬åœ°å­˜å‚¨"]
    F["permission/<br/>æƒé™ç®¡ç†"]
    G["resources/<br/>èµ„æº"]
    
    A --> B
    A --> C
    A --> D
    A --> E
    A --> F
    A --> G
    
    B1["HttpUtil.ts"]
    C1["DateUtil.ts"]
    D1["LogUtil.ts"]
    E1["StorageUtil.ts"]
    F1["PermissionUtil.ts"]
    
    B --> B1
    C --> C1
    D --> D1
    E --> E1
    F --> F1
    
    style A fill:#e0f2f1
    style B fill:#b2dfdb
    style C fill:#80cbc4
    style D fill:#4db6ac
    style E fill:#26a69a
    style F fill:#009688
    style G fill:#00897b
```

---

## å…³é”®æµç¨‹è®¾è®¡

### 6.1 åº”ç”¨å¯åŠ¨æµç¨‹

```mermaid
graph TD
    A["åº”ç”¨å¯åŠ¨"]
    B["EntryAbility.onCreate"]
    C["åˆå§‹åŒ–åº”ç”¨ä¸Šä¸‹æ–‡"]
    D["åŠ è½½é…ç½®æ–‡ä»¶"]
    E["åˆå§‹åŒ–æ•°æ®åº“"]
    F["è¯·æ±‚æƒé™"]
    G["å¯åŠ¨é»˜è®¤Page"]
    H["è¿›å…¥ MainPage"]
    I["åŠ è½½ç³»ç»Ÿé…ç½®<br/>æ·±æµ…æ¨¡å¼"]
    J["åˆå§‹åŒ–æ•°æ®æœåŠ¡"]
    K["å¯åŠ¨å®šæ—¶å™¨<br/>3ç§’åˆ·æ–°"]
    L["æ¸²æŸ“é¦–é¡µUI"]
    
    A --> B
    B --> C
    B --> D
    B --> E
    B --> F
    B --> G
    G --> H
    H --> I
    H --> J
    H --> K
    H --> L
    
    style A fill:#ffebee
    style B fill:#ffcccc
    style C fill:#ffb3b3
    style D fill:#ff9a9a
    style E fill:#ff8181
    style F fill:#ff6868
    style G fill:#ff4f4f
    style H fill:#e1f5fe
    style I fill:#b3e5fc
    style J fill:#81d4fa
    style K fill:#4fc3f7
    style L fill:#29b6f6
```

### 6.2 å¥åº·æ•°æ®è·å–æµç¨‹ï¼ˆé¡ºåºå›¾ï¼‰

```mermaid
sequenceDiagram
    participant User as ç”¨æˆ·
    participant WellnessPage as WellnessPage
    participant ViewModel as HealthSportsViewModel
    participant DataService as MockDataService
    
    User->>WellnessPage: 1.æ‰“å¼€åº·å…»é¡µé¢
    WellnessPage->>WellnessPage: 2.aboutToAppear()
    WellnessPage->>ViewModel: 3.getHealthData()
    ViewModel->>DataService: 4.fetchHealthData()
    DataService-->>ViewModel: 5.returnå¥åº·æ•°æ®
    ViewModel->>WellnessPage: 6.æ›´æ–°çŠ¶æ€å€¼
    WellnessPage->>WellnessPage: 7.UIé‡æ–°æ¸²æŸ“
    WellnessPage-->>User: 8.æ˜¾ç¤ºå¥åº·æ•°æ®
```

### 6.3 åŒ»ç–—å‘¼å«æµç¨‹ï¼ˆæ´»åŠ¨å›¾ï¼‰

```mermaid
graph TD
    Start["ç”¨æˆ·ç‚¹å‡»å‘¼å«"] --> Query["æŸ¥è¯¢å¯ç”¨åŒ»æŠ¤"]
    Query --> Decision{æœ‰å¯ç”¨åŒ»æŠ¤?}
    Decision -->|æ˜¯| Connect["å»ºç«‹è§†é¢‘è¿æ¥"]
    Decision -->|å¦| Wait["åŠ å…¥ç­‰å¾…é˜Ÿåˆ—"]
    Wait --> Query
    
    Connect --> CallPage["è¿›å…¥é€šè¯é¡µé¢"]
    CallPage --> Active["æ­£åœ¨é€šè¯"]
    Active --> End{æŒ‚æ–­?}
    End -->|æ˜¯| Save["ä¿å­˜é€šè¯è®°å½•"]
    Save --> Return["è¿”å›é¦–é¡µ"]
    
    style Start fill:#ffebee
    style Query fill:#ffcccc
    style Decision fill:#fff9c4
    style Connect fill:#b3e5fc
    style Wait fill:#ffe0b2
    style CallPage fill:#81d4fa
    style Active fill:#4fc3f7
    style End fill:#fff9c4
    style Save fill:#c8e6c9
    style Return fill:#a5d6a7
```

### 6.4 åœ¨çº¿é—®è¯Šæµç¨‹ï¼ˆé¡ºåºå›¾ï¼‰

```mermaid
sequenceDiagram
    participant User as ç”¨æˆ·
    participant UI as é—®è¯Šé¡µé¢
    participant VM as ViewModel
    participant Svc as é—®è¯ŠæœåŠ¡
    participant Doctor as åŒ»ç”Ÿ
    
    User->>UI: 1. è¿›å…¥é—®è¯Šé¡µ
    UI->>VM: 2. è·å–åŒ»ç”Ÿåˆ—è¡¨
    VM->>Svc: 3. æŸ¥è¯¢åŒ»ç”Ÿ
    Svc-->>VM: 4. è¿”å›åˆ—è¡¨
    VM-->>UI: 5. å±•ç¤ºåŒ»ç”Ÿ
    
    User->>UI: 6. é€‰æ‹©å¹¶é¢„çº¦
    UI->>Svc: 7. å‘é€é¢„çº¦
    Svc->>Doctor: 8. è½¬å‘é¢„çº¦
    Doctor-->>Svc: ç¡®è®¤é¢„çº¦
    Svc-->>UI: 9. é¢„çº¦æˆåŠŸ
    UI-->>User: 10. ç­‰å¾…é˜Ÿåˆ—
    
    Doctor->>Svc: 11. åŒ»ç”Ÿæ¥å…¥
    Svc->>UI: æ¥å…¥é€šçŸ¥
    UI-->>User: 12. è¿›å…¥é—®è¯Š
    
    User->>Doctor: 13. é€šä¿¡äº¤æµ
    Doctor->>Svc: 14. å¼€å…·å¤„æ–¹
    Svc->>UI: å‘é€å¤„æ–¹
    UI-->>User: 15. ç¡®è®¤å¤„æ–¹
    
    User->>UI: 16. ç»“æŸé—®è¯Š
    UI->>Svc: 17. ä¿å­˜è®°å½•
    Svc-->>UI: ä¿å­˜å®Œæˆ
    UI-->>User: 18. è¿”å›é¦–é¡µ
```

---

## æ•°æ®æ¨¡å‹è®¾è®¡

### 7.1 æ ¸å¿ƒæ•°æ®ç±»å›¾

```mermaid
classDiagram
    class HealthData {
        -sleepData: SleepData
        -stressData: StressData
        -heartData: HeartData
        -bpData: BloodPressureData
        -o2Data: BloodOxygenData
        -tempData: TemperatureData
        +getHealthStatus(): string
        +hasAbnormality(): boolean
    }
    
    class SleepData {
        -date: string
        -deepSleep: number
        -lightSleep: number
        -totalSleep: number
    }
    
    class StressData {
        -date: string
        -value: number
        -level: string
    }
    
    class HeartData {
        -date: string
        -heartRate: number
        -status: string
    }
    
    class BloodPressureData {
        -date: string
        -systolic: number
        -diastolic: number
        -status: string
    }
    
    class BloodOxygenData {
        -date: string
        -spo2: number
        -status: string
    }
    
    class TemperatureData {
        -date: string
        -value: number
        -status: string
    }
    
    class SportsData {
        -stepsData: StepsData
        -caloriesData: CaloriesData
        -date: string
        +getProgressRate(): number
        +isGoalReached(): boolean
    }
    
    class StepsData {
        -goal: number
        -current: number
        -distance: number
    }
    
    class CaloriesData {
        -goal: number
        -current: number
        -burned: number
    }
    
    class ConsultationModel {
        -id: string
        -userId: string
        -doctorId: string
        -doctorName: string
        -appointmentTime: string
        -status: string
        -messages: Message[]
        -prescription: Prescription
        +getStatus(): string
        +addMessage(): void
        +setPrescription(): void
    }
    
    class Message {
        -id: string
        -sender: string
        -content: string
        -type: string
        -timestamp: number
    }
    
    class DoctorModel {
        -id: string
        -name: string
        -specialty: string
        -hospital: string
        -rating: number
        -experience: number
        -isAvailable: boolean
        -consultationFee: number
        +getAvailableSlots(): Time[]
        +bookAppointment(): void
    }
    
    class HomeData {
        -energyData: EnergyData
        -networkData: NetworkData
        -weatherData: WeatherData
        +getEnergyStatus(): string
        +getNetworkQuality(): string
        +getWeatherAlert(): Alert
    }
    
    class EnergyData {
        -power: number
        -usage: number
        -carbon: number
        -co2: number
    }
    
    class NetworkData {
        -upload: string
        -download: string
        -quality: string
    }
    
    class WeatherData {
        -temp: number
        -condition: string
        -icon: string
        -alert: string
    }
    
    HealthData *-- SleepData
    HealthData *-- StressData
    HealthData *-- HeartData
    HealthData *-- BloodPressureData
    HealthData *-- BloodOxygenData
    HealthData *-- TemperatureData
    
    SportsData *-- StepsData
    SportsData *-- CaloriesData
    
    ConsultationModel *-- Message
    
    HomeData *-- EnergyData
    HomeData *-- NetworkData
    HomeData *-- WeatherData
```

### 7.2 æ•°æ®æµå‘

```mermaid
graph TD
    A["æ„ŸçŸ¥å±‚<br/>ä¼ æ„Ÿå™¨/è®¾å¤‡<br/>ç©¿æˆ´è®¾å¤‡ã€å¿ƒç‡è®¡<br/>è¡€å‹è®¡ã€ä½“æ¸©è®¡"]
    
    B["æ•°æ®é‡‡é›†å±‚<br/>- å®šæ—¶è½®è¯¢ä¼ æ„Ÿå™¨æ•°æ®<br/>- ç¼“å­˜åŸå§‹æ•°æ®"]
    
    C["ä¸šåŠ¡é€»è¾‘å±‚<br/>ViewModel<br/>- æ•°æ®æ¸…æ´—å’Œè½¬æ¢<br/>- è§¦å‘å¼‚å¸¸é¢„è­¦é€»è¾‘<br/>- è®¡ç®—ç»Ÿè®¡æŒ‡æ ‡"]
    
    D["æœ¬åœ°æ•°æ®åº“<br/>- æŒä¹…åŒ–å­˜å‚¨<br/>- å†å²æŸ¥è¯¢"]
    
    E["è¿œç¨‹æœåŠ¡å™¨<br/>- åŒæ­¥æ•°æ®<br/>- äº‘åˆ†æ"]
    
    F["è¡¨ç°å±‚ UI<br/>- å®æ—¶æ•°æ®å±•ç¤º<br/>- å›¾è¡¨åˆ†æ<br/>- å‘Šè­¦æç¤º"]
    
    A --> B
    B --> C
    C --> D
    C --> E
    D --> F
    E --> F
    
    style A fill:#ffebee
    style B fill:#ffcccc
    style C fill:#fff3e0
    style D fill:#e8f5e9
    style E fill:#e3f2fd
    style F fill:#f3e5f5
```

---

## æ¥å£è§„èŒƒ

### 8.1 æ¨¡å—é—´é€šä¿¡æ¥å£

#### 8.1.1 ä¸»é¡µæ¨¡å— â†’ å¥åº·æ¨¡å—

```typescript
// å¯¼å‡ºå¥åº·å¡ç‰‡ç»„ä»¶
export struct HealthCard {
  @Prop healthStatus: HealthData;
  onNavigate: (target: string) => void;
}

// å¯¼å‡ºå¥åº·æ¨¡å—çš„é¡µé¢
export { WellnessPage, HealthSportsPage } from './pages';
```

#### 8.1.2 ä¸»é¡µæ¨¡å— â†’ åŒ»ç–—æ¨¡å—

```typescript
// å¯¼å‡ºåŒ»ç–—å¡ç‰‡ç»„ä»¶
export struct MedicalCard {
  onCallDoctor: () => void;
  onConsultation: () => void;
}

// å¯¼å‡ºåŒ»ç–—æ¨¡å—çš„é¡µé¢
export { CallPage, OnlineConsult } from './pages';
```

#### 8.1.3 å¯¼èˆªæ¥å£ï¼ˆè·¨æ¨¡å—è·¯ç”±ï¼‰

```typescript
interface NavigationHelper {
  /**
   * å¯¼èˆªåˆ°æŒ‡å®šé¡µé¢
   * @param pageName é¡µé¢åç§°ï¼ˆæ”¯æŒå‘½åè·¯ç”±ï¼‰
   * @param params ä¼ é€’å‚æ•°
   */
  navigateTo(pageName: string, params?: any): void;

  /**
   * è¿”å›ä¸Šä¸€ä¸ªé¡µé¢
   */
  goBack(): void;

  /**
   * æ›¿æ¢å½“å‰é¡µé¢
   */
  replaceWith(pageName: string, params?: any): void;
}
```

### 8.2 æ•°æ®æœåŠ¡æ¥å£

#### 8.2.1 å¥åº·æ•°æ®æœåŠ¡

```typescript
interface IHealthService {
  /**
   * è·å–ä»Šæ—¥å¥åº·æ•°æ®
   */
  getHealthData(): Promise<HealthData>;

  /**
   * è·å–è¿åŠ¨æ•°æ®
   */
  getSportsData(): Promise<SportsData>;

  /**
   * è·å–å†å²æ•°æ®ï¼ˆæŒ‰æ—¥æœŸèŒƒå›´ï¼‰
   */
  getHistoryData(startDate: string, endDate: string): Promise<HealthData[]>;

  /**
   * æ£€æŸ¥å¼‚å¸¸æ•°æ®
   */
  checkAbnormality(data: HealthData): AbnormalityAlert[];

  /**
   * ä¿å­˜å¥åº·æ•°æ®
   */
  saveHealthData(data: HealthData): Promise<boolean>;
}
```

#### 8.2.2 åŒ»ç–—æœåŠ¡æ¥å£

```typescript
interface IMedicalService {
  /**
   * è·å–å¯ç”¨åŒ»ç”Ÿåˆ—è¡¨
   */
  getAvailableDoctors(): Promise<Doctor[]>;

  /**
   * å‘èµ·å‘¼å«
   */
  initiateCall(doctorId: string): Promise<CallSession>;

  /**
   * ç»“æŸå‘¼å«
   */
  endCall(callId: string): Promise<boolean>;

  /**
   * é¢„çº¦é—®è¯Š
   */
  bookConsultation(doctorId: string, timeSlot: string): Promise<Consultation>;

  /**
   * è·å–é—®è¯Šè®°å½•
   */
  getConsultationHistory(): Promise<Consultation[]>;

  /**
   * ä¿å­˜é—®è¯Šæ¶ˆæ¯
   */
  saveMessage(consultId: string, message: Message): Promise<boolean>;
}
```

#### 8.2.3 é¦–é¡µæ•°æ®æœåŠ¡

```typescript
interface IHomeDataService {
  /**
   * è·å–èƒ½æºæ•°æ®
   */
  getEnergyData(): EnergyData;

  /**
   * è·å–ç½‘ç»œæ•°æ®
   */
  getNetworkData(): NetworkData;

  /**
   * è·å–å¤©æ°”æ•°æ®
   */
  getWeatherData(): Promise<WeatherData>;

  /**
   * èšåˆæ‰€æœ‰é¦–é¡µæ•°æ®
   */
  getAllHomeData(): Promise<HomeData>;
}
```

### 8.3 HTTP API è§„èŒƒ

#### 8.3.1 RESTful ç«¯ç‚¹

```
ã€å¥åº·ç›¸å…³ã€‘
GET    /api/v1/health/today              è·å–ä»Šæ—¥å¥åº·æ•°æ®
GET    /api/v1/health/history?from&to    è·å–å†å²æ•°æ®
POST   /api/v1/health/save                ä¿å­˜å¥åº·æ•°æ®
GET    /api/v1/sports/today               è·å–ä»Šæ—¥è¿åŠ¨æ•°æ®

ã€åŒ»ç–—ç›¸å…³ã€‘
GET    /api/v1/doctors                    è·å–åŒ»ç”Ÿåˆ—è¡¨
POST   /api/v1/call/initiate              å‘èµ·å‘¼å«
POST   /api/v1/call/end/{callId}          ç»“æŸå‘¼å«
POST   /api/v1/consultation/book          é¢„çº¦é—®è¯Š
GET    /api/v1/consultation/history       è·å–é—®è¯Šå†å²
POST   /api/v1/consultation/{id}/message  å‘é€é—®è¯Šæ¶ˆæ¯

ã€é¦–é¡µç›¸å…³ã€‘
GET    /api/v1/home/energy                è·å–èƒ½æºæ•°æ®
GET    /api/v1/home/weather               è·å–å¤©æ°”æ•°æ®
GET    /api/v1/home/network               è·å–ç½‘ç»œçŠ¶æ€
```

#### 8.3.2 è¯·æ±‚/å“åº”æ ¼å¼

```json
// è¯·æ±‚ç¤ºä¾‹
{
  "method": "GET",
  "url": "https://api.example.com/api/v1/health/today",
  "headers": {
    "Content-Type": "application/json",
    "Authorization": "Bearer {token}"
  }
}

// æˆåŠŸå“åº”æ ¼å¼
{
  "code": 200,
  "message": "success",
  "data": {
    "heartRate": 72,
    "bloodPressure": {
      "systolic": 120,
      "diastolic": 80
    },
    "bloodOxygen": 98,
    "temperature": 36.5
  },
  "timestamp": 1703891234567
}

// é”™è¯¯å“åº”æ ¼å¼
{
  "code": 400,
  "message": "å‚æ•°é”™è¯¯",
  "errors": [
    {
      "field": "userId",
      "reason": "ç”¨æˆ·ä¸å­˜åœ¨"
    }
  ],
  "timestamp": 1703891234567
}
```

---

## é™„å½•ï¼šå…³é”®ç±»è®¾è®¡

### A.1 ViewModel åŸºç±»

```typescript
/**
 * ViewModel åŸºç±»ï¼Œå®šä¹‰é€šç”¨çš„ä¸šåŠ¡é€»è¾‘å¤„ç†èƒ½åŠ›
 */
export abstract class BaseViewModel {
  protected isLoading: boolean = false;
  protected errorMessage: string = '';

  /**
   * åŠ è½½æ•°æ®ï¼ˆéœ€ç”±å­ç±»å®ç°ï¼‰
   */
  abstract loadData(): Promise<void>;

  /**
   * é”™è¯¯å¤„ç†
   */
  protected handleError(error: Error): void {
    this.errorMessage = error.message;
    console.error(`é”™è¯¯: ${error}`);
  }

  /**
   * æ•°æ®éªŒè¯
   */
  protected validate(data: any): boolean {
    return data !== null && data !== undefined;
  }
}
```

### A.2 Service åŸºç±»

```typescript
/**
 * Service åŸºç±»ï¼Œå®šä¹‰æ•°æ®è®¿é—®å’Œä¸šåŠ¡æ“ä½œ
 */
export abstract class BaseService {
  protected baseUrl: string = 'https://api.example.com';
  protected timeout: number = 30000;

  /**
   * HTTP è¯·æ±‚å°è£…
   */
  protected async request<T>(
    method: string,
    endpoint: string,
    data?: any
  ): Promise<T> {
    try {
      // è°ƒç”¨ HttpUtil å‘é€è¯·æ±‚
      const response = await HttpUtil.request({
        method,
        url: `${this.baseUrl}${endpoint}`,
        data,
        timeout: this.timeout
      });
      return response.data as T;
    } catch (error) {
      this.handleError(error);
      throw error;
    }
  }

  protected handleError(error: any): void {
    console.error(`æœåŠ¡é”™è¯¯: ${error}`);
  }
}
```

### A.3 è·¯ç”±å¸®åŠ©ç±»

```typescript
/**
 * è·¯ç”±å¯¼èˆªå¸®åŠ©ç±»
 */
export class RouterHelper {
  /**
   * å¯¼èˆªåˆ°æŒ‡å®šé¡µé¢
   */
  static navigate(
    routeName: string,
    params?: Record<string, any>
  ): void {
    router.pushUrl({
      url: `pages/${routeName}`,
      params: params || {}
    });
  }

  /**
   * è¿”å›ä¸Šä¸€é¡µ
   */
  static back(): void {
    router.back();
  }

  /**
   * ç”¨å‘½åè·¯ç”±å¯¼èˆª
   */
  static navigateByName(routeName: string): void {
    router.pushNamedRoute({
      name: routeName
    });
  }
}
```

---

## æ€»ç»“

æœ¬éœ€æ±‚æ–‡æ¡£è¯¦ç»†æè¿°äº†åä¸ºä¸­æ§å±é¡¹ç›®çš„æ•´ä½“è®¾è®¡ï¼ŒåŒ…æ‹¬ï¼š

1. **é¡¹ç›®æ¦‚è¿°** - æ˜ç¡®çš„é¡¹ç›®ç›®æ ‡å’Œç‰¹ç‚¹
2. **åŠŸèƒ½éœ€æ±‚** - ä¸»è¦åŠŸèƒ½æ¨¡å—å’Œå…·ä½“éœ€æ±‚
3. **ç³»ç»Ÿæ¶æ„** - åˆ†å±‚æ¶æ„è®¾è®¡ï¼Œæ¸…æ™°çš„èŒè´£åˆ’åˆ†
4. **UMLè®¾è®¡** - ç”¨ä¾‹å›¾ã€æµç¨‹å›¾ã€ç±»å›¾ç­‰
5. **æ¨¡å—ç»“æ„** - å„æ¨¡å—çš„è¯¦ç»†åˆ’åˆ†å’Œç»„æˆ
6. **æ•°æ®æ¨¡å‹** - å®Œæ•´çš„æ•°æ®ç»“æ„è®¾è®¡
7. **æ¥å£è§„èŒƒ** - æ¨¡å—é—´é€šä¿¡å’ŒAPIæ¥å£å®šä¹‰

é€šè¿‡è¿™ä»½æ–‡æ¡£ï¼Œå¼€å‘å›¢é˜Ÿèƒ½å¤Ÿæ¸…æ™°ç†è§£é¡¹ç›®éœ€æ±‚ï¼ŒæŒ‰ç…§æ—¢å®šçš„æ¶æ„è¿›è¡Œå¼€å‘ï¼Œç¡®ä¿é«˜è´¨é‡çš„ä»£ç äº¤ä»˜ã€‚

